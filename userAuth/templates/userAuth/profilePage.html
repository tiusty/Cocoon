{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Profile</title>
    <!-- Custom StyleSheets -->
    <link rel="stylesheet" href="{% static 'userAuth/profilePage.css' %}">
    <!-- JQuery CDN -->
    <script
            src="https://code.jquery.com/jquery-2.2.4.js"
            integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
            crossorigin="anonymous"></script>
    <!-- Bootstrap style sheet -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>

<div class="container">
    <!-- Static navbar -->
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                        aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="{% url 'homePage:index' %}">Project Unicorn</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="{% url 'homePage:index' %}">Home</a></li>
                    <li class="active"><a>Survey</a></li>
                    <li><a href="{% url 'homePage:contactPage' %}">Contact</a></li>
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    {% if user.is_authenticated %}
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                               aria-haspopup="true"
                               aria-expanded="false">Welcome {{ user.email }} <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="{% url 'userAuth:logoutPage' %}">Logout</a></li>
                                <li><a href="{% url 'userAuth:profilePage' 'profile' %}">User Profile</a></li>
                                <li role="separator" class="divider"></li>
                                <li class="dropdown-header">Surveys</li>
                                <li><a href="{% url 'userAuth:profilePage' 'rentSurvey' %}">Renting Survey</a></li>
                                <li><a href="{% url 'userAuth:profilePage' 'buySurvey' %}">Buying Surveys</a></li>
                            </ul>
                        </li>
                    {% else %}
                        <li><a href="{% url 'userAuth:loginPage' %}">Login <span class="sr-only">(current)</span></a>
                        </li>
                    {% endif %}
                </ul>
            </div><!--/.nav-collapse -->
        </div><!--/.container-fluid -->
    </nav>

    <div class="row">
        <div class="col-sm-12">
            {% if error_message %}
                <div class="row">
                    <div class="col-sm-offset-3 col-sm-6" style="color:red">
                        <p><strong>{{ error_message }}</strong></p>
                    </div>
                </div>
            {% endif %}

        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-sm-6">
            <div class="card hovercard">
                <div class="card-background">
                    <img class="card-bkimg" alt="" src="http://lorempixel.com/100/100/people/9/">
                    <!-- http://lorempixel.com/850/280/people/9/ -->
                </div>
                <div class="useravatar">
                    <img alt="" src="http://lorempixel.com/100/100/people/9/">
                </div>
                <div class="card-info"><span class="card-title">{{ userProfile.user.get_full_name }}</span>

                </div>
            </div>
            <div class="btn-pref btn-group btn-group-justified btn-group-lg" role="group" aria-label="...">
                <div class="btn-group" role="group">
                    <button type="button" id="stars"
                            {% if defaultProfile == 0 %}
                                class="btn btn-primary"
                            {% else %}
                                class="btn btn-default"
                            {% endif %}
                            href="#tab1" data-toggle="tab"><span
                            class="glyphicon glyphicon-user" aria-hidden="true"></span>
                        <div class="hidden-xs">Profile</div>
                    </button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" id="favorites"
                            {% if defaultProfile == 1 %}
                                class="btn btn-primary"
                            {% else %}
                                class="btn btn-default"
                            {% endif %}
                            href="#tab2" data-toggle="tab"><span
                            class="glyphicon glyphicon-heart" aria-hidden="true"></span>
                        <div class="hidden-xs">Rent Surveys</div>
                    </button>
                </div>
                <div class="btn-group" role="group">
                    <button type="button" id="following"
                            {% if defaultProfile == 2 %}
                                class="btn btn-primary"
                            {% else %}
                                class="btn btn-default"
                            {% endif %}
                            href="#tab3" data-toggle="tab"><span
                            class="glyphicon glyphicon-home" aria-hidden="true"></span>
                        <div class="hidden-xs">Buying Surveys</div>
                    </button>
                </div>
            </div>

            <div class="well">
                <div class="tab-content">
                    {% if defaultProfile == 0 %}
                        <div class="tab-pane fade in active" id="tab1">
                    {% else %}
                        <div class="tab-pane fade in" id="tab1">
                    {% endif %}
                    <div class="row">
                        <h3 class="col-sm-12">Account Setting</h3>
                        <div class="col-sm-9 col-sm-offset-3">
                            {{ form.as_p }}
                            <p>Number of Rent Surveys: {{ numRentSurveys }}</p>
                            <p>Number of Buy Surveys: {{ numBuySurveys }}</p>
                        </div>
                    </div>
                    </div>
                    {% if defaultProfile == 1 %}
                        <div class="tab-pane fade in active" id="tab2">
                    {% else %}
                        <div class="tab-pane fade in" id="tab2">
                    {% endif %}
                            <div class="panel-group" id="accordion_rent">
                                {% for survey in surveys %}
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h4 class="panel-title">
                                            <a data-toggle="collapse" data-parent="#accordion_rent" href="#collapse{{ forloop.counter }}">
                                                <h4> <b>Survey Name: {{ survey.name }}</b></h4></a>
                                        </h4>
                                    </div>
                                    <div id="collapse{{ forloop.counter }}" class="panel-collapse collapse {% if forloop.counter == 1 %}in{% endif %}">
                                        <div class="panel-body">
                                            <table class="table">
                                                <thead>
                                                <tr>
                                                    <th>Survey Name</th>
                                                    <th>Home_Types</th>
                                                    <th>Min Price</th>
                                                    <th>Max Price</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr>
                                                    <td>{{ survey.name }}</td>
                                                    <td>
                                                        {% for home_type in survey.home_type.all %}
                                                            {{ home_type }},
                                                        {% endfor %}
                                                    </td>
                                                    <td> {{ survey.minPrice }}</td>
                                                    <td> {{ survey.maxPrice }}</td>
                                                </tr>
                                                </tbody>
                                            </table>
                                            <a href="{% url 'survey:surveyResult' survey_type="rent" survey_id=survey.id %}"
                                               class="btn btn-primary active" role="button">Load!</a>
                                    </div>
                                </div>
                                </div>
                                {% endfor %}
                            </div>
                    </div>
                    {% if defaultProfile == 2 %}
                        <div class="tab-pane fade in active" id="tab3">
                    {% else %}
                        <div class="tab-pane fade in" id="tab3">
                    {% endif %}
                        <h3>Not Implemented yet!</h3>
                    </div>
                </div>
            </div>

        </div>
    </div>


</div> <!-- /container -->
<!-- Custom Javascript -->
<script src="{% static 'userAuth/profilePage.js' %}"></script>
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
</body>
</html>