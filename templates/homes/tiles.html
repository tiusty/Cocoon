{% comment header %}

This file includes all necessary code to implement a tile list
on any page. Both regular tiles, expanded tiles, and the javascript
that styles these tiles is included in this page.

Note: A parent page that imports the tile templating must
link to the survey_result styling css file.

Note: this file requires that the parent template that includes
it adds these tiles in a for loop and has access to a house list
context.

{% endcomment %}
{% load static %}

<div class="tile bound">

    {#  Template that holds expanded tile information. #}
    {#  Script tag contents read in by  jQuery         #}

    <script id="expanded-tile-contents" type="text/template">
        <div class="expanded-tile-container">
            <div class="expanded-row-top">
                                            <span onclick="minimize(this)"
                                                  class="expanded-close glyphicon glyphicon-resize-small"></span>
                <button type="button"
                        onclick="set_visit_house({{ theHouse.id }}, '{% url 'survey:setVisitHouse' %}')"
                        class="contact-button btn btn-primary">Show Contact
                </button>
            </div>
            <div class="expanded-tile-contents">

                {#  TODO: Populate this with actual template information   #}

                {% if includeScore %}

                <span class="expanded-tile-text expanded-score
                                            {% if homeScore > 86 %}
                                                great-match
                                            {% elif homeScore > 79 %}
                                                good-match
                                            {% elif homeScore > 69 %}
                                                acceptable-match
                                            {% elif homeScore > 59 %}
                                                bad-match
                                            {% else %}
                                                terrible-match
                                            {% endif %}">{{ homeScore }}</span>
                {% endif %}

                <span id="glyph{{ house.id }}"
                      onclick="set_favorite({{ house.id }}, '{% url 'survey:setFavorite' %}');"
                        {% if theHouse in user_favorite_houses %}
                      class="expanded-glyph glyphicon glyphicon-heart"
                      style="cursor:pointer"
                        {% else %}
                      class="expanded-glyph glyphicon glyphicon-heart-empty"
                      style="cursor:pointer"
                        {% endif %}
                      aria-hidden="true">
                                            </span>

                <span class="expanded-tile-text expanded-info">{{ theHouse.get_full_address }}</span>

                <span class="expanded-tile-text expanded-info">{{ theHouse.get_price_str }}</span>

                <div id="myCarousel" class="carousel slide" data-ride="carousel">
                    <!-- Indicators -->
                    <ol class="carousel-indicators">
                        <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
                        <li data-target="#myCarousel" data-slide-to="1"></li>
                        <li data-target="#myCarousel" data-slide-to="2"></li>
                    </ol>

                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active">
                            <img src="{% static 'stockHomes/stock_houses/house1.1.jpg' %}"
                                 alt="Los Angeles">
                        </div>

                        <div class="item">
                            <img src="{% static 'stockHomes/stock_houses/house1.2.jpg' %}"
                                 alt="Chicago">
                        </div>

                        <div class="item">
                            <img src="{% static 'stockHomes/stock_houses/house1.3.jpg' %}"
                                 alt="New York">
                        </div>
                    </div>

                    <!-- Left and right controls -->
                    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
                        <span class="glyphicon glyphicon-chevron-left"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="right carousel-control" href="#myCarousel" data-slide="next">
                        <span class="glyphicon glyphicon-chevron-right"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>



            </div>
        </div>
    </script>

    <div class="scoreItem" {% if not includeScore %} style="border-right:none;" {% endif %}>

      {% if includeScore %}
        <span class="scoreText
                {% if homeScore > 86 %}
                    great-match
                {% elif homeScore > 79 %}
                    good-match
                {% elif homeScore > 69 %}
                    acceptable-match
                {% elif homeScore > 59 %}
                    bad-match
                {% else %}
                    terrible-match
                {% endif %}">{{ homeScore }}
        </span>
    {% endif %}

        <span id="glyph{{ house.id }}"
              onclick="set_favorite({{ house.id }}, '{% url 'survey:setFavorite' %}');"
                {% if theHouse in user_favorite_houses %}
              class="glyphicon glyphicon-heart"
              style="cursor:pointer"
                {% else %}
              class="glyphicon glyphicon-heart-empty"
              style="cursor:pointer"
                {% endif %}
              aria-hidden="true"></span>
    </div>
    <div class="infoItem">

        {# TODO: Pull high priority items here #}
        {# Below are placeholder strings    #}

        <span class="infoBit">{{ theHouse.get_price_str }}</span>
        <span class="infoBit addressBit">{{ theHouse.get_full_address }}</span>
        <span class="infoBit"></span>

    </div>

    {% for image in theHouse.housephotos_set.all|slice:":2" %}
        <div class="thumbnailItem" id="thumbnailItem{{ forloop.counter }}">
            <img class="thumbnailImage"
                 src="{% static image %}">
        </div>
        <div class="thumbnailItem" id="thumbnailItem{{ forloop.counter }}">
            <img class="thumbnailImage"
                 src="{% static 'stockHomes/stock_houses/house1.3.jpg' %}">
        </div>
    {% endfor %}
</div>

{% comment %}

    Javascript imports below here:

{% endcomment %}